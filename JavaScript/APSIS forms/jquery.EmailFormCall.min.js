function openPopup(e){$("input[name=pf_redir]").val(window.location.href),console.log("Opening popup of element named "+e),$.magnificPopup.open({items:{src:e},type:"inline",removalDelay:500,callbacks:{beforeOpen:function(){this.st.mainClass="mfp-zoom-in"}},closeOnBgClick:!1})}function countScore(){var e=0,o=dataLayer[0].pageType;if("detail"==o)var p=2;else var p=1;null===$.cookie("PopupCounter")||void 0===$.cookie("PopupCounter")?(e=p,$.cookie("PopupCounter",e)):(e=parseInt($.cookie("PopupCounter")),e+=p,$.cookie("PopupCounter",e))}function openForm(e,o,p,n){if($.cookie("PopupCounter")>=o&&1e3!=$.cookie("PopupSubscribed")&&void 0===$.cookie("PopupShown")&&(void 0===$.cookie("PopupSubscribed")||$.cookie("PopupSubscribed")<n)){if(void 0===$.cookie("PopupSubscribed"))var i=1;else var i=parseInt($.cookie("PopupSubscribed"))+1;1==popupDisable?(dataLayer.push({event:"ga.event",eCategory:"popup",eAction:"display",eLabel:"no-popup",eValue:i}),$.cookie("PopupShown",1,{expires:e}),$.cookie("PopupSubscribed",i,{expires:1800})):(dataLayer.push({event:"ga.event",eCategory:"popup",eAction:"display",eLabel:p,eValue:i}),setTimeout(function(){$.cookie("PopupShown",1,{expires:e}),$.cookie("PopupSubscribed",i,{expires:1800});try{openPopup("#NewsletterForm")}catch(o){console.log("Element was not defined.")}},2e3))}}function openThanks(){1==$.cookie("PopupShown")&&1e3==$.cookie("PopupSubscribed")&&(console.log("Opening thanks popup."),0!==$("#NewsletterThanks").length?($.magnificPopup.open({items:{src:"#NewsletterThanks"},type:"inline",removalDelay:500,callbacks:{beforeOpen:function(){this.st.mainClass="mfp-zoom-in"}},closeOnBgClick:!0}),$.cookie("PopupShown",2,{expires:1800})):console.log("NewsletterThanks did not exist when calling the popup."))}function runPopup(e,o,p,n){var i="http://"+document.domain+"/data/user-content/script/forms/"+p+".html";$.ajax({url:i,success:function(i){$("body").prepend(i),inPopups={},inPopups.variant=p,countScore(),openForm(e,o,p,n),openThanks()}})}